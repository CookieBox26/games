<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>作業時間計算</title>
  <style>
    body { font-family: sans-serif; margin: 1em; line-height: 1.3; }
    h1 { font-weight: normal; }
  </style>
</head>
<body>
  <h1>作業時間計算</h1>
  <div id="result"></div>

  <script>
    function formatTime(ts) {
      const d = new Date(ts * 1000);
      return d.toLocaleString(undefined, { timeZoneName: 'short' });
    }

    const params = new URLSearchParams(location.search);
    let html = "";
    for (let i = 1; i <= 10; i++) {
      let bt = params.get(`bt${i}`);
      let et = params.get(`et${i}`);
      let rem = params.get(`rem${i}`);
      if (!(bt && et)) {
        if (i == 1) {
          html = "URL パラメータ bt1, et1 が必要です。";
          break;
        }
        continue;
      }
      bt = Number(bt);
      et = Number(et);
      const diffMs = et - bt;
      const diffMin = Math.floor(diffMs / 60);
      const hours = Math.floor(diffMin / 60);
      const minutes = diffMin % 60;

      html += `
        <p>作業開始${i}: &nbsp; ${formatTime(bt)}
        <br/>作業終了${i}: &nbsp; ${formatTime(et)}
        <br/>作業時間${i}: &nbsp; ${hours} 時間 ${minutes} 分
      `;
      if (rem) {
        html += `<br/>備考${i}: &nbsp; ${rem}`
      }
      html += '</p>'
    }
    document.getElementById("result").innerHTML = html;
  </script>
</body>
</html>
